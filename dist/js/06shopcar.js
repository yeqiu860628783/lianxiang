"use strict";$(function(){var s,h;window.localStorage.length?(s=function(){$(".xuan:checked").length==$(".xuan").length?($(".quanxuan")[0].checked=!0,$(".quanxuan1")[0].checked=!0):($(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1),0==$(".xuan:checked").length&&($(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1)},h=function(){for(var e,t=0,a=0;a<$(".xuan").length;a++){$(".xuan")[a].checked&&(e=$(".xuan")[a].parentNode.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML,t+=parseFloat(e))}$(".zojia").html("商品总价 : "+t.toFixed(2)),$("#totalmoneyf").html(t.toFixed(2))},$.get("./php/getbijibenlist.php",function(e){for(var t=JSON.parse(e),a="{",n=0;n<t.length;n++){var l=localStorage.getItem("id".concat(n));null!=l&&(a+='"id'.concat(n,'":"').concat(l,'",'))}a=a.slice(0,a.length-1),a+="}";var i,c=JSON.parse(a),r="";for(var o in c){var s=(i=t[o.split("id")[1]-1]).price.split("￥")[1];r+='\n                    <tr>\n                        <td width="57" class="tab-sel"><input type="checkbox" name="" class="xuan"></td>\n                        <td width="148" class="tab-img"><a href="#"><img src="'.concat(i.img,'" alt=""></a></td>\n                        <td width="257" class="tab-name">\n                            <a>').concat(i.tit,'</a>\n                            <div class="bc_service">\n                                <a href="javascript:;">\n                                    <img src="./img2/5.jpg" alt="">\n                                    购买联想服务\n                                </a>\n                            </div>\n                        </td>\n                        <td width="163"></td>\n                        <td width="153" class="tab-price">\n                            ').concat(s,'\n                        </td>\n                        <td width="152" class="tab-jj">\n                            <label class="clear-fix">\n                                <input class="pro_jian" value="-" type="button" name="">\n                                <input class="pro_num" value="').concat(c[o],'" type="text" name="').concat(o,'">\n                                <input class="pro_add" value="+" type="button" name="">\n                            </label>\n                        </td>\n                        <td width="152" class="tab-xiaoji">').concat(s*c[o],'</td>\n                        <td width="117" class="tab-caozuo">\n                            <a class="tab-remove" href="javascript:;">删除</a><br>\n                            <a href="javascript:;">移入收藏夹</a>\n                        </td>\n                    </tr>\n                ')}$(".goodslist").html(r),$(".pro_num").change(function(){$(this).val()<1||isNaN(parseInt($(this).val()))?$(this).val(1):$(this).val(parseInt($(this).val())),localStorage.setItem($(this).attr("name"),$(this).val()),$(this).parent().parent().next().html((parseInt($(this).val())*parseFloat($(this).parent().parent().prev().html())).toFixed(2))})}),$("main").click(function(e){var t,a,n,l=(e=e||window.event).target||e.srcElement;if("quanxuan"==$(l).attr("class")){for(var i in $(".xuan"))l.checked?($(".xuan")[i].checked=!0,$(".quanxuan")[0].checked=!0,$(".quanxuan1")[0].checked=!0):($(".xuan")[i].checked=!1,$(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1);0==$(".xuan").length&&($(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1)}if("quanxuan1"==$(l).attr("class")){for(var i in $(".xuan"))l.checked?($(".xuan")[i].checked=!0,$(".quanxuan")[0].checked=!0,$(".quanxuan1")[0].checked=!0):($(".xuan")[i].checked=!1,$(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1);0==$(".xuan").length&&($(".quanxuan")[0].checked=!1,$(".quanxuan1")[0].checked=!1)}if("xuan"==$(l).attr("class")&&s(),"bc_num_del"==$(l).attr("class")){if(0==$(".xuan:checked").length)confirm("亲，你还没选择要删除的商品");else{if(confirm("亲，确定要删除选中的全部宝贝吗？"))for(i=$(".xuan").length-1;0<=i;i--)$(".xuan")[i].checked&&(localStorage.removeItem($($(".xuan")[i]).parent().next().next().next().next().next().children().children().eq(1).attr("name")),$(".xuan")[i].parentNode.parentNode.remove());s()}0==window.localStorage.length&&(alert("亲，你购物车没有东西了,3秒后跳转至商品页"),setTimeout(function(){location.href="11bijibenlist.html"},3e3))}if("tab-remove"==$(l).attr("class")&&(confirm("亲，确定要删除当前宝贝？")&&(localStorage.removeItem($(l).parent().prev().prev().children().children().eq(1).attr("name")),l.parentNode.parentNode.remove()),0==window.localStorage.length&&(alert("亲，你购物车没有东西了,3秒后跳转至商品页"),setTimeout(function(){location.href="11bijibenlist.html"},3e3))),"+"==$(l).val()&&(t=$(l).prev().val(),t++,$(l).prev().val(t),localStorage.setItem($(l).prev().attr("name"),t),a=+$(l).parent().parent().prev().html(),n=parseInt(t)*parseFloat(a),$(l).parent().parent().next().html(n.toFixed(2))),"-"==$(l).val()&&((t=$(l).next().val())<=1?t=1:t--,$(l).next().val(t),localStorage.setItem($(l).next().attr("name"),t),a=+$(l).parent().parent().prev().html(),n=parseInt(t)*parseFloat(a),$(l).parent().parent().next().html(n.toFixed(2))),"jiesuan"==$(l).attr("class")){var c=$("#totalmoneyf").html();if(parseInt(c)<="0")alert("你还没有选择商品，请选择后购买");else{for(var r,o="",i=$(".xuan").length-1;0<=i;i--){$(".xuan")[i].checked&&(r=$(".xuan")[i].parentNode.parentNode,o+=$(r).children().eq(5).children().children().eq(1).attr("name")+"&")}location.href="10buy.html?"+o}s()}h()}),h()):(alert("亲，你还没有添加任何商品"),location.href="11bijibenlist.html")}),$(function(){var e=getCookie("userName");""!=e&&null!=e?$.ajax({url:"./php/checkUser.php",data:{username:getCookie("userName")},success:function(e){"0"<=e.indexOf(getCookie("userName"))&&($(".top").html('<ul>\n                            <li><a href="./03index.html">返回首页</a></li>\n                            <li class="yhu">\n                                <a href="javascript:;">'.concat(getCookie("userName"),'\n                                    <ul class="tuichu">\n                                        <li><button class="tdenlu">退出登录</button></li>\n                                        <li><button class="tzido">清除自动登录</button></li>\n                                    </ul>\n                                </a>\n                            </li>\n                            <li><a href="#">我的订单</a></li>\n                        </ul>')),$(".tdenlu").click(function(){$(".top").html('<ul>\n                                <li><a href="./03index.html">返回首页</a></li>\n                                <li><a href="./02denlu.html">登录</a></li>\n                            </ul>'),delCookie("userName",-1)}),$(".tzido").click(function(){$(".top").html('<ul>\n                                <li><a href="./03index.html">返回首页</a></li>\n                                <li><a href="./02denlu.html">登录</a></li>\n                            </ul>'),delCookie("userName",-1),delCookie("login",-1)}))}}):(alert("您还没有登录，请登录之后再查看购物车"),location.href="./03index.html"),$("#item_prev .btn_bg").click(function(){var e=$("#item_hot ul li").index($(".show"));$("#item_hot ul li").attr("class",""),$("#item_hot ul li").eq(e<0?e+8:e-4).attr("class","show"),$("#item_hot ul li").eq(e<0?e+9:e-3).attr("class","show"),$("#item_hot ul li").eq(e<0?e+10:e-2).attr("class","show"),$("#item_hot ul li").eq(e<0?e+11:e-1).attr("class","show")}),$("#item_next .btn_bg").click(function(){var e=$("#item_hot ul li").index($(".show"));$("#item_hot ul li").attr("class",""),$("#item_hot ul li").eq(8<=e?e-8:e+4).attr("class","show"),$("#item_hot ul li").eq(8<=e?e-7:e+5).attr("class","show"),$("#item_hot ul li").eq(8<=e?e-6:e+6).attr("class","show"),$("#item_hot ul li").eq(8<=e?e-5:e+7).attr("class","show")})});